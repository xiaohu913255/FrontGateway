{"remainingRequest":"E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\node_modules\\babel-loader\\lib\\index.js!E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\src\\utils\\request.js","dependencies":[{"path":"E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\src\\utils\\request.js","mtime":1725789930894},{"path":"E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\babel.config.js","mtime":1725789930622},{"path":"E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\Language\\Go\\Project\\Test\\Gateway\\FrontGateway\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/Language/Go/Project/Test/Gateway/FrontGateway/node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _elementUi = require(\"element-ui\");\nvar _store = _interopRequireDefault(require(\"@/store\"));\nvar _auth = require(\"@/utils/auth\");\n// create an axios instance\nvar service = _axios.default.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n});\n\n// request interceptor\nservice.interceptors.request.use(function (config) {\n  // do something before request is sent\n\n  if (_store.default.getters.token) {\n    // let each request carry token\n    // ['X-Token'] is a custom headers key\n    // please modify it according to the actual situation\n    config.headers['X-Token'] = (0, _auth.getToken)();\n  }\n  return config;\n}, function (error) {\n  // do something with request error\n  console.log(error); // for debug\n  return Promise.reject(error);\n});\n\n// response interceptor\nservice.interceptors.response.use(\n/**\r\n * If you want to get http information such as headers or status\r\n * Please return  response => response\r\n*/\n\n/**\r\n * Determine the request status by custom code\r\n * Here is just an example\r\n * You can also judge the status by HTTP Status Code\r\n */\nfunction (response) {\n  var res = response.data;\n\n  // if the custom code is not 0, it is judged as an error.\n  if (res.errno !== 0) {\n    (0, _elementUi.Message)({\n      message: res.errmsg || 'Error',\n      type: 'error',\n      duration: 5 * 1000\n    });\n\n    // // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\n    // if (res.errno === 50008 || res.errno === 50012 || res.errno === 50014) {\n    //   // to re-login\n    //   MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\n    //     confirmButtonText: 'Re-Login',\n    //     cancelButtonText: 'Cancel',\n    //     type: 'warning'\n    //   }).then(() => {\n    //     store.dispatch('user/resetToken').then(() => {\n    //       location.reload()\n    //     })\n    //   })\n    // }\n    return Promise.reject(new Error(res.errmsg || 'Error'));\n  } else {\n    return res;\n  }\n}, function (error) {\n  console.log('err' + error); // for debug\n  (0, _elementUi.Message)({\n    message: error.errmsg,\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\nvar _default = exports.default = service;",{"version":3,"names":["_axios","_interopRequireDefault","require","_elementUi","_store","_auth","service","axios","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","store","getters","token","headers","getToken","error","console","log","Promise","reject","response","res","data","errno","Message","message","errmsg","type","duration","Error","_default","exports","default"],"sources":["E:/Language/Go/Project/Test/Gateway/FrontGateway/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 5000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  config => {\r\n    // do something before request is sent\r\n\r\n    if (store.getters.token) {\r\n      // let each request carry token\r\n      // ['X-Token'] is a custom headers key\r\n      // please modify it according to the actual situation\r\n      config.headers['X-Token'] = getToken()\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    // do something with request error\r\n    console.log(error) // for debug\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n  */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  response => {\r\n    const res = response.data\r\n\r\n    // if the custom code is not 0, it is judged as an error.\r\n    if (res.errno !== 0) {\r\n      Message({\r\n        message: res.errmsg || 'Error',\r\n        type: 'error',\r\n        duration: 5 * 1000\r\n      })\r\n\r\n      // // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\r\n      // if (res.errno === 50008 || res.errno === 50012 || res.errno === 50014) {\r\n      //   // to re-login\r\n      //   MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\r\n      //     confirmButtonText: 'Re-Login',\r\n      //     cancelButtonText: 'Cancel',\r\n      //     type: 'warning'\r\n      //   }).then(() => {\r\n      //     store.dispatch('user/resetToken').then(() => {\r\n      //       location.reload()\r\n      //     })\r\n      //   })\r\n      // }\r\n      return Promise.reject(new Error(res.errmsg || 'Error'))\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error) // for debug\r\n    Message({\r\n      message: error.errmsg,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AAEA;AACA,IAAMI,OAAO,GAAGC,cAAK,CAACC,MAAM,CAAC;EAC3BC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;EAAE;EACvC;EACAC,OAAO,EAAE,IAAI,CAAC;AAChB,CAAC,CAAC;;AAEF;AACAP,OAAO,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9B,UAAAC,MAAM,EAAI;EACR;;EAEA,IAAIC,cAAK,CAACC,OAAO,CAACC,KAAK,EAAE;IACvB;IACA;IACA;IACAH,MAAM,CAACI,OAAO,CAAC,SAAS,CAAC,GAAG,IAAAC,cAAQ,EAAC,CAAC;EACxC;EACA,OAAOL,MAAM;AACf,CAAC,EACD,UAAAM,KAAK,EAAI;EACP;EACAC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,EAAC;EACnB,OAAOG,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAjB,OAAO,CAACQ,YAAY,CAACc,QAAQ,CAACZ,GAAG;AAC/B;AACF;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACE,UAAAY,QAAQ,EAAI;EACV,IAAMC,GAAG,GAAGD,QAAQ,CAACE,IAAI;;EAEzB;EACA,IAAID,GAAG,CAACE,KAAK,KAAK,CAAC,EAAE;IACnB,IAAAC,kBAAO,EAAC;MACNC,OAAO,EAAEJ,GAAG,CAACK,MAAM,IAAI,OAAO;MAC9BC,IAAI,EAAE,OAAO;MACbC,QAAQ,EAAE,CAAC,GAAG;IAChB,CAAC,CAAC;;IAEF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,OAAOV,OAAO,CAACC,MAAM,CAAC,IAAIU,KAAK,CAACR,GAAG,CAACK,MAAM,IAAI,OAAO,CAAC,CAAC;EACzD,CAAC,MAAM;IACL,OAAOL,GAAG;EACZ;AACF,CAAC,EACD,UAAAN,KAAK,EAAI;EACPC,OAAO,CAACC,GAAG,CAAC,KAAK,GAAGF,KAAK,CAAC,EAAC;EAC3B,IAAAS,kBAAO,EAAC;IACNC,OAAO,EAAEV,KAAK,CAACW,MAAM;IACrBC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,CAAC,GAAG;EAChB,CAAC,CAAC;EACF,OAAOV,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AAC9B,CACF,CAAC;AAAA,IAAAe,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEclC,OAAO","ignoreList":[]}]}